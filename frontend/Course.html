<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" 
    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    rel="nofollow" 
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
    crossorigin="anonymous">
    <title>Document</title>
    <script>
        getData();
        async function getData(){
        const response = await fetch('http://localhost:8081/courses')
        const data = await response.json();
        const tbody = document.querySelector('#bodys')
        
        let courses = data.map(course =>{
            console.log(course);
            let tr = document.createElement('tr');
            let tdFirst = document.createElement('td');
            let tdLast = document.createElement('td');
            let editBtn = document.createElement('button');
            let deleteBtn = document.createElement('button');
            editBtn.innerHTML = "Edit";
            deleteBtn.innerHTML = "Delete";
            tdFirst.textContent = course.name;
            tdLast.textContent = course.code;
            tr.appendChild(tdFirst);
            tr.appendChild(tdLast);
            tr.appendChild(editBtn);
            tr.appendChild(deleteBtn);
            return tr;
        });
        tbody.append(...courses);
    }
    function test(){
        let cname = document.getElementById("cname").value;
        let code = document.getElementById("code").value;
        fetch("http://localhost:8081/courses", {
                method: "POST",
                body: JSON.stringify({
                    id: 23,
                    name : cname ,
                    code : code,
        }),
     headers: {
         "Content-type": "application/json; charset=UTF-8"}
        })
 .then(response => response.json())
 .then(json=>console(json));
 location.reload()
    }
    
    </script>
</head>
<body>
    <h1 id="header"> Course Managment Page</h1>
    <h2>Add New student</h2>
    <div class="save">
    <label>Course Name : </label>
    <input type="text" name="fname"  id="cname"/>
    <label>Course code : </label>
    <input type="text" name="lname" id="code"/>
    <button onclick="test()">Save</button>
`   </div>
    <table class="table">
        <thead class="thead-dark">
          <tr>
            <th scope="col">Course Name</th>
            <th scope="col">Course code</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody id="bodys">
          
        </tbody>
      </table>
</body>
</html>